import flixel.FlxG;
import flixel.FlxState;
import flixel.tile.FlxBaseTilemap;
import flixel.tile.FlxTilemap;


class PlayState extends FlxState
{
	override public function create():Void
	{
		super.create();
		bgColor = 0xff849684;
		level = new FlxTilemap();
		level.loadMapFromCSV(mapData, "assets/images/tiles_alpha.png", 16, 16, FlxTilemapAutoTiling.OFF, 1);
		char = new Character(64, 64);
		add(char);
		add(level);
	}

	 override public function update(elapsed:Float):Void
	{
		super.update(elapsed);
		FlxG.collide(level, char);
	}

	private var char: Character;
	private var level: FlxTilemap;
	private var mapData: String =
	"260,257,258,261,261,258,258,259,261,257,258,258,261,258,257,258,261,257,260,257,
	 258,262,259,258,276,273,276,275,276,273,274,273,276,274,276,273,276,275,258,262,
	 261,258,273,276,274,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,273,259,258,
	 259,276,275,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,276,275,260,
	 257,274,  0,  0,  0,  0,274,276,273,276,273,274,273,275,276,  0,  0,  0,276,262,
	 260,276,  0,  0,  0,  0,276,257,258,262,258,258,258,258,275,  0,  0,  0,273,261,
	 261,273,  0,  0,  0,  0,273,258,257,259,258,261,258,258,276,  0,  0,  0,274,260,
	 258,274,  0,  0,  0,  0,274,273,276,275,258,258,257,260,275,  0,  0,  0,276,262,
	 261,276,  0,  0,  0,  0,  0,  0,  0,276,258,261,258,258,275,  0,  0,  0,273,258,
	 260,273,  0,  0,  0,  0,  0,  0,  0,273,262,258,258,274,276,  0,  0,  0,273,261,
	 257,275,  0,  0,  0,  0,  0,  0,  0,276,276,275,276,273,274,  0,  0,  0,274,262,
	 259,276,  0,  0,273,275,274,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,275,259,
	 261,273,  0,  0,276,258,273,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,273,257,
	 258,274,276,273,275,257,276,274,276,274,276,273,276,275,273,276,273,276,274,260,
	 257,260,261,258,258,262,260,261,259,260,261,259,261,257,260,261,259,262,258,262";
}
